# 目标平台
CONFIG_TARGET_qualcommax=y
CONFIG_TARGET_qualcommax_ipq60xx=y

# 仅编译这两台：cmiot_ax18 / zn_m2
CONFIG_TARGET_DEVICE_qualcommax_ipq60xx_DEVICE_cmiot_ax18=y
CONFIG_TARGET_DEVICE_qualcommax_ipq60xx_DEVICE_zn_m2=y

# WIFI-NO 版：关闭 11ax 相关
CONFIG_PACKAGE_kmod-ath11k=n
CONFIG_PACKAGE_kmod-ath11k-ahb=n
CONFIG_PACKAGE_kmod-ath11k-pci=n
CONFIG_PACKAGE_ath11k-firmware-ipq6018=n
CONFIG_PACKAGE_ath11k-firmware-qcn9074=n
CONFIG_PACKAGE_wpad-openssl=n
CONFIG_PACKAGE_hostapd-common=n

# 科学环境（按你的要求）
CONFIG_PACKAGE_luci-app-homeproxy=n
CONFIG_PACKAGE_luci-app-momo=y
CONFIG_PACKAGE_luci-app-nikki=y
CONFIG_PACKAGE_sing-box=y

# 常用工具与依赖
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_kmod-inet-diag=y
CONFIG_PACKAGE_openssh-sftp-server=y

# LuCI 常用
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-lib-base=y
CONFIG_PACKAGE_luci-lib-ipkg=y
CONFIG_PACKAGE_luci-lua-runtime=y
CONFIG_PACKAGE_luci-proto-bonding=y
CONFIG_PACKAGE_luci-proto-relay=y

# 增加的 LuCI 插件
CONFIG_PACKAGE_luci-app-autoreboot=y
CONFIG_PACKAGE_luci-app-gecoosac=y
CONFIG_PACKAGE_luci-app-netspeedtest=y
CONFIG_PACKAGE_luci-app-partexp=y
CONFIG_PACKAGE_luci-app-samba4=n
CONFIG_PACKAGE_luci-app-tailscale=y
CONFIG_PACKAGE_luci-app-upnp=y
CONFIG_PACKAGE_luci-app-wolplus=y
CONFIG_PACKAGE_luci-app-wol=n

# 构建参数
CONFIG_CCACHE=y
CONFIG_DEVEL=y
CONFIG_TARGET_MULTI_PROFILE=y
CONFIG_TARGET_PER_DEVICE_ROOTFS=y
CONFIG_TARGET_ROOTFS_INITRAMFS=n

# 内核/kmod：网络/NFT
CONFIG_PACKAGE_kmod-dsa=y
CONFIG_PACKAGE_kmod-fs-btrfs=y
CONFIG_PACKAGE_kmod-fuse=y
CONFIG_PACKAGE_kmod-mtd-rw=y
CONFIG_PACKAGE_kmod-netlink-diag=y
CONFIG_PACKAGE_kmod-nft-bridge=y
CONFIG_PACKAGE_kmod-nft-core=y
CONFIG_PACKAGE_kmod-nft-fib=y
CONFIG_PACKAGE_kmod-nft-fullcone=y
CONFIG_PACKAGE_kmod-nft-nat=y
CONFIG_PACKAGE_kmod-nft-netdev=y
CONFIG_PACKAGE_kmod-nft-offload=y
CONFIG_PACKAGE_kmod-nft-queue=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-tproxy=y

# USB 与存储/网卡
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-dwc3=y
CONFIG_PACKAGE_kmod-usb-net=y
CONFIG_PACKAGE_kmod-usb-net-cdc-eem=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ether=y
CONFIG_PACKAGE_kmod-usb-net-cdc-mbim=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ncm=y
CONFIG_PACKAGE_kmod-usb-net-cdc-subset=y
CONFIG_PACKAGE_kmod-usb-net-huawei-cdc-ncm=y
CONFIG_PACKAGE_kmod-usb-net-ipheth=y
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan=y
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan-fibocom=y
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan-quectel=y
CONFIG_PACKAGE_kmod-usb-net-rndis=y
CONFIG_PACKAGE_kmod-usb-net-rtl8150=y
CONFIG_PACKAGE_kmod-usb-net-rtl8152=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-uhci=y
CONFIG_PACKAGE_kmod-usb-xhci=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-extras=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y

# VPN/加速
CONFIG_PACKAGE_kmod-wireguard=y

# 常用工具
CONFIG_PACKAGE_iperf3=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_mmc-utils=y
CONFIG_PACKAGE_nand-utils=y
CONFIG_PACKAGE_openssh-keygen=y
CONFIG_PACKAGE_openssl-util=y
CONFIG_PACKAGE_sfdisk=y
CONFIG_PACKAGE_sgdisk=y
CONFIG_PACKAGE_usbutils=y

# Kernel 能力（容器/隔离更稳定，即使不装 Docker/Podman）
CONFIG_KERNEL_CGROUPS=y
CONFIG_KERNEL_CGROUP_PIDS=y
CONFIG_KERNEL_MEMCG=y
CONFIG_KERNEL_NAMESPACES=y
CONFIG_KERNEL_USER_NS=y
CONFIG_KERNEL_SECCOMP=y
CONFIG_KERNEL_SECCOMP_FILTER=y
CONFIG_KERNEL_KEYS=y

# ===== SMALL 进一步瘦身（60MB 目标）=====
# —— 关大块头应用 ——
#CONFIG_PACKAGE_luci-app-tailscale=n
#CONFIG_PACKAGE_tailscale=n
CONFIG_PACKAGE_iperf3=n
CONFIG_PACKAGE_openssh-sftp-server=n
CONFIG_PACKAGE_openssh-keygen=n
CONFIG_PACKAGE_luci-app-partexp=n
CONFIG_PACKAGE_sfdisk=n
CONFIG_PACKAGE_sgdisk=n
CONFIG_PACKAGE_lsblk=n
CONFIG_PACKAGE_usbutils=n
CONFIG_PACKAGE_mmc-utils=n
CONFIG_PACKAGE_nand-utils=n
CONFIG_PACKAGE_luci-app-netspeedtest=n

# —— 文件系统/内核模块 ——
CONFIG_PACKAGE_kmod-fs-btrfs=n
CONFIG_PACKAGE_kmod-fuse=n
CONFIG_PACKAGE_kmod-mtd-rw=n
# nft：保留 core/nat/tproxy/offload/bridge；可关 queue/socket/fib
CONFIG_PACKAGE_kmod-nft-queue=n
CONFIG_PACKAGE_kmod-nft-socket=n
CONFIG_PACKAGE_kmod-nft-fib=n

# —— 内核能力：不跑容器时全部关闭 ——
CONFIG_KERNEL_CGROUPS=n
CONFIG_KERNEL_CGROUP_PIDS=n
CONFIG_KERNEL_MEMCG=n
CONFIG_KERNEL_NAMESPACES=n
CONFIG_KERNEL_USER_NS=n
CONFIG_KERNEL_SECCOMP=n
CONFIG_KERNEL_SECCOMP_FILTER=n
CONFIG_KERNEL_KEYS=n

# —— USB 控制器/存储 ——
# 只保留 xhci/dwc3/storage；老控制器与扩展包关闭
CONFIG_PACKAGE_kmod-usb-ohci=n
CONFIG_PACKAGE_kmod-usb-uhci=n
CONFIG_PACKAGE_kmod-usb-storage-extras=n
CONFIG_PACKAGE_kmod-usb-storage-uas=n
# 如确实不插U盘，也可进一步：
# CONFIG_PACKAGE_kmod-usb-storage=n

# —— USB 网卡：按需留1~2个，其他全关（这里仅保留最常见的 8152，如不用可再关） ——
CONFIG_PACKAGE_kmod-usb-net=n
CONFIG_PACKAGE_kmod-usb-net-cdc-eem=n
CONFIG_PACKAGE_kmod-usb-net-cdc-ether=n
CONFIG_PACKAGE_kmod-usb-net-cdc-mbim=n
CONFIG_PACKAGE_kmod-usb-net-cdc-ncm=n
CONFIG_PACKAGE_kmod-usb-net-cdc-subset=n
CONFIG_PACKAGE_kmod-usb-net-huawei-cdc-ncm=n
CONFIG_PACKAGE_kmod-usb-net-ipheth=n
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan=n
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan-fibocom=n
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan-quectel=n
CONFIG_PACKAGE_kmod-usb-net-rndis=n
CONFIG_PACKAGE_kmod-usb-net-rtl8150=n
# 常见 USB 千兆转接（若确实使用则保留=y；否则也可以关）
CONFIG_PACKAGE_kmod-usb-net-rtl8152=y

# —— LuCI 协议插件：不用就关 ——
CONFIG_PACKAGE_luci-proto-bonding=n
CONFIG_PACKAGE_luci-proto-relay=n

